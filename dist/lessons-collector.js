!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://localhost:3002/",n(n.s=26)}({0:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return a}));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"fileNameNormalize",value:function(e){var t=e.trim().split(""),n={"\\":"_","/":"_",":":"-","*":"_","?":"7",'"':"'","<":"{",">":"}","|":" l "};return(t=t.map((function(e){return n[e]||e}))).join("")}},{key:"fileNameExt",value:function(e){var t=e.match(/.*(\.\w*)/i);return t&&t[1]}},{key:"blob2base64",value:function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.readAsDataURL(e)}))}},{key:"StrBytes",value:function(e){var t,n,r,a=0,o=e.length;for(r=0;r<o;r++)(t=e.charCodeAt(r))>=55296&&t<57344&&t<56320&&r+1<o&&(n=e.charCodeAt(r+1))>=56320&&n<57344?(a+=4,r++):a+=t<128?1:t<2048?2:3;return a}},{key:"Percent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(0===t)return(0).toFixed(n);var r=100*e/t;return r.toFixed(n)}},{key:"FileSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=+e,isNaN(e))return!1;var n=0,r=["Б","КБ","МБ","ГБ","ТБ"];function a(e){return e>1024&&n<4?(n++,a(e/1024)):e}return t?{size:a(e),level:n,unit:r[n]}:"".concat(a(e).toFixed(1)," ").concat(r[n])}},{key:"UrlParse",value:function(e){var t={},n=e.match(/(http\:\/\/|https\:\/\/|ftp\:\/\/)(.*?\..*?\/)(.*\/)*(.*)(\/.*\.(.*))*/i);if(t.schema=n[1],t.host=n[2],t.path=n[3].split("/"),t.path=t.path.filter((function(e){return e.length>0})),n[4]){var r=n[4].split(".");if(r.length>1){var a=r.pop(),o=r.join(".");t.file={fileName:o+"."+a,name:o,ext:a}}else t.path.push(n[4])}return t}},{key:"TimeNormalizer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"!=typeof e||e<0)return!1;var r=[],a=e/1e3,o={},i={day:"д",hour:"ч",min:"мин",sec:"с",msec:"мс"},u={min:60,hour:3600,day:86400},l=!1;function s(e,t){t<=0&&!l||(l=!0,r.push({unit:i[e],value:t}))}var c=Math.floor(a/u.day);s("day",c),a-=c*u.day;var f=Math.floor(a/u.hour);s("hour",f),a-=f*u.hour;var m=Math.floor(a/u.min);s("min",m);var d=Math.floor(a%60);(!t&&!l||d>0)&&(l=!0,s("sec",d));var p=Math.round(1e3*(a%60-d));return o.msec=p,!t&&l||(l=!0,s("msec",p)),n?r:r.reduce((function(e,t,n){return e+"".concat(n>0?" ":"").concat(t.value).concat(t.unit)}),"")}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}()},2:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return a}));var a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.default_val=n,this.init()}var t,n,a;return t=e,(n=[{key:"set",value:function(e,t){if(void 0===t)return!1;var n=JSON.parse(localStorage.getItem(this.name));return n[e]=t,localStorage.setItem(this.name,JSON.stringify(n)),n}},{key:"get",value:function(e){return JSON.parse(localStorage.getItem(this.name))[e]}},{key:"getAll",value:function(){return JSON.parse(localStorage.getItem(this.name))}},{key:"remove",value:function(e){var t=JSON.parse(localStorage.getItem(this.name));return delete t[e],localStorage.setItem(this.name,JSON.stringify(t)),t}},{key:"clear",value:function(){localStorage.removeItem(this.name),this.prepareStorage()}},{key:"prepareStorage",value:function(){return null==localStorage.getItem(this.name)&&(localStorage.setItem(this.name,JSON.stringify(this.default_val)),!0)}},{key:"init",value:function(){this.prepareStorage()}}])&&r(t.prototype,n),a&&r(t,a),e}()},26:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),o=n(0),i=n(2);function u(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,l,"next",e)}function l(e){u(o,r,a,i,l,"throw",e)}i(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,a,i;return t=e,n=null,r=[{key:"collectLessonsData",value:(i=l(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.querySelector("#lessons-list"),r=n.querySelectorAll(".lessons-item"),a=[],r.forEach((function(e,n){var r=t.get(n),i={index:n,name_prefix:o.a.fileNameNormalize(e.querySelector('[itemprop="name"]').textContent),name_concat:" ",lesson_name:o.a.fileNameNormalize(e.querySelector(".lessons-name").textContent),storage_name:n,url:e.querySelector('[itemprop="url"]').href,ext:o.a.UrlParse(e.querySelector('[itemprop="url"]').href).file.ext,content:null,mime:null,total:r?+r:0,loaded:r?+r:0,percent:r?100:0,is_checked:!0,is_loading:!1,is_loaded:!!r,was_loaded:!!r};a.push(i)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"collectMaterials",value:(a=l(regeneratorRuntime.mark((function e(t,n,r){var a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.querySelector('[title="Download course materials"]')){e.next=3;break}return e.abrupt("return",!1);case 3:return i=t.get("code"),u={index:n,name_prefix:"Материалы курса",name_concat:" - ",lesson_name:o.a.fileNameNormalize(r),storage_name:"code",url:a.href,ext:o.a.UrlParse(a.href).file.ext,content:null,mime:null,total:i?+i:0,loaded:i?+i:0,percent:i?100:0,is_checked:!0,is_loading:!1,is_loaded:!!i,was_loaded:!!i},e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)}))),function(e,t,n){return a.apply(this,arguments)})}],n&&s(t.prototype,n),r&&s(t,r),e}();function f(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){f(o,r,a,i,u,"next",e)}function u(e){f(o,r,a,i,u,"throw",e)}i(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){var t,n,r,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="collectLessons",r=m(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(t=o.a.UrlParse(document.location.href)).path.pop(),u.setCourseName(t),u.storage=new i.a(t,{}),n=document.querySelector("h1.hero-title").textContent,u.setCourseDisplayName(n),e.next=8,u.collectLessonItems();case 8:return e.next=10,u.collectMaterials();case 10:a()(JSON.stringify(u.json," ",4),"".concat(o.a.fileNameNormalize(n),".json"),"application/json");case 11:case"end":return e.stop()}}),e)}))),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.json={course_name:"",course_display_name:"",lesson_items:[]},this.storage=null,this.init()}var t,n,r,u,l;return t=e,(n=[{key:"createBtn",value:function(){this.btn=document.createElement("button"),this.btn.className="btn mt-20 ml-20",this.btn.textContent="Скачать json с уроками",this.btn.addEventListener("click",this.collectLessons),document.querySelector("#lessons-toggle").after(this.btn)}},{key:"collectLessonItems",value:(l=m(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.collectLessonsData(this.storage);case 2:(t=e.sent)&&(t.forEach((function(e){return n.addItem(e)})),this.storage.set("cnt",this.cnt));case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"collectMaterials",value:(u=m(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.collectMaterials(this.storage,this.cnt,this.getCourseDisplayName);case 3:(t=e.sent)&&this.addItem(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return u.apply(this,arguments)})},{key:"addItem",value:function(e){this.json.lesson_items.push(e)}},{key:"setCourseName",value:function(e){this.json.course_name=e}},{key:"setCourseDisplayName",value:function(e){this.json.course_display_name=e}},{key:"init",value:function(){this.createBtn()}},{key:"destroy",value:function(){this.btn.remove()}},{key:"cnt",get:function(){return this.json.lesson_items.length}},{key:"getCourseDisplayName",get:function(){return this.json.course_display_name}}])&&d(t.prototype,n),r&&d(t,r),e}();window.lessonsCollector=new p},5:function(e,t,n){var r,a,o;a=[],void 0===(o="function"==typeof(r=function(){return function e(t,n,r){var a,o,i=window,u="application/octet-stream",l=r||u,s=t,c=!n&&!r&&s,f=document.createElement("a"),m=function(e){return String(e)},d=i.Blob||i.MozBlob||i.WebKitBlob||m,p=n||"download";if(d=d.call?d.bind(i):Blob,"true"===String(this)&&(l=(s=[s,l])[0],s=s[1]),c&&c.length<2048&&(p=c.split("/").pop().split("?")[0],f.href=c,-1!==f.href.indexOf(c))){var h=new XMLHttpRequest;return h.open("GET",c,!0),h.responseType="blob",h.onload=function(t){e(t.target.response,p,u)},setTimeout((function(){h.send()}),0),h}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(s)){if(!(s.length>2096103.424&&d!==m))return navigator.msSaveBlob?navigator.msSaveBlob(b(s),p):w(s);l=(s=b(s)).type||u}else if(/([\x80-\xff])/.test(s)){for(var v=0,y=new Uint8Array(s.length),g=y.length;v<g;++v)y[v]=s.charCodeAt(v);s=new d([y],{type:l})}function b(e){for(var t=e.split(/[:;,]/),n=t[1],r=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),a=r.length,o=0,i=new Uint8Array(a);o<a;++o)i[o]=r.charCodeAt(o);return new d([i],{type:n})}function w(e,t){if("download"in f)return f.href=e,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===t&&setTimeout((function(){i.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,u)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,u)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(a=s instanceof d?s:new d([s],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(a,p);if(i.URL)w(i.URL.createObjectURL(a),!0);else{if("string"==typeof a||a.constructor===m)try{return w("data:"+l+";base64,"+i.btoa(a))}catch(e){return w("data:"+l+","+encodeURIComponent(a))}(o=new FileReader).onload=function(e){w(this.result)},o.readAsDataURL(a)}return!0}})?r.apply(t,a):r)||(e.exports=o)}});