!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://localhost:3002/",n(n.s=2)}([function(e,t,n){var r,o,a;o=[],void 0===(a="function"==typeof(r=function(){return function e(t,n,r){var o,a,i=window,l="application/octet-stream",u=r||l,c=t,s=!n&&!r&&c,f=document.createElement("a"),d=function(e){return String(e)},h=i.Blob||i.MozBlob||i.WebKitBlob||d,p=n||"download";if(h=h.call?h.bind(i):Blob,"true"===String(this)&&(u=(c=[c,u])[0],c=c[1]),s&&s.length<2048&&(p=s.split("/").pop().split("?")[0],f.href=s,-1!==f.href.indexOf(s))){var v=new XMLHttpRequest;return v.open("GET",s,!0),v.responseType="blob",v.onload=function(t){e(t.target.response,p,l)},setTimeout((function(){v.send()}),0),v}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(c)){if(!(c.length>2096103.424&&h!==d))return navigator.msSaveBlob?navigator.msSaveBlob(m(c),p):y(c);u=(c=m(c)).type||l}function m(e){for(var t=e.split(/[:;,]/),n=t[1],r=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),o=r.length,a=0,i=new Uint8Array(o);a<o;++a)i[a]=r.charCodeAt(a);return new h([i],{type:n})}function y(e,t){if("download"in f)return f.href=e,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout((function(){f.click(),document.body.removeChild(f),!0===t&&setTimeout((function(){i.URL.revokeObjectURL(f.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return e=e.replace(/^data:([\w\/\-\+]+)/,l),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),t||(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,l)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(o=c instanceof h?c:new h([c],{type:u}),navigator.msSaveBlob)return navigator.msSaveBlob(o,p);if(i.URL)y(i.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===d)try{return y("data:"+u+";base64,"+i.btoa(o))}catch(e){return y("data:"+u+","+encodeURIComponent(o))}(a=new FileReader).onload=function(e){y(this.result)},a.readAsDataURL(o)}return!0}})?r.apply(t,o):r)||(e.exports=a)},,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"fileNameNormalize",value:function(e){var t=e.trim().split(""),n={"\\":"_","/":"_",":":"-","*":"_","?":"7",'"':"'","<":"{",">":"}","|":" l "};return(t=t.map((function(e){return n[e]||e}))).join("")}},{key:"fileNameExt",value:function(e){var t=e.match(/.*(\.\w*)/i);return t&&t[1]}},{key:"blob2base64",value:function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.readAsDataURL(e)}))}},{key:"StrBytes",value:function(e){var t,n,r,o=0,a=e.length;for(r=0;r<a;r++)(t=e.charCodeAt(r))>=55296&&t<57344&&t<56320&&r+1<a&&(n=e.charCodeAt(r+1))>=56320&&n<57344?(o+=4,r++):o+=t<128?1:t<2048?2:3;return o}},{key:"Percent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(0===t)return(0).toFixed(n);var r=100*e/t;return r.toFixed(n)}},{key:"FileSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=+e,isNaN(e))return!1;var n=0,r=["Б","КБ","МБ","ГБ","ТБ"];function o(e){return e>1024&&n<4?(n++,o(e/1024)):e}return t?{size:o(e),level:n,unit:r[n]}:"".concat(o(e).toFixed(1)," ").concat(r[n])}},{key:"UrlParse",value:function(e){var t={},n=e.match(/(http\:\/\/|https\:\/\/|ftp\:\/\/)(.*?\..*?\/)(.*\/)*(.*)(\/.*\.(.*))*/i);if(t.schema=n[1],t.host=n[2],t.path=n[3].split("/"),t.path=t.path.filter((function(e){return e.length>0})),n[4]){var r=n[4].split(".");if(r.length>1){var o=r.pop(),a=r.join(".");t.file={fileName:a+"."+o,name:a,ext:o}}else t.path.push(n[4])}return t}},{key:"TimeNormalizer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("number"!=typeof e||e<0)return!1;var r=[],o=e/1e3,a={},i={day:"д",hour:"ч",min:"мин",sec:"с",msec:"мс"},l={min:60,hour:3600,day:86400},u=!1;function c(e,t){t<=0&&!u||(u=!0,r.push({unit:i[e],value:t}))}var s=Math.floor(o/l.day);c("day",s),o-=s*l.day;var f=Math.floor(o/l.hour);c("hour",f),o-=f*l.hour;var d=Math.floor(o/l.min);c("min",d);var h=Math.floor(o%60);(!t&&!u||h>0)&&(u=!0,c("sec",h));var p=Math.round(1e3*(o%60-h));return a.msec=p,!t&&u||(u=!0,c("msec",p)),n?r:r.reduce((function(e,t,n){return e+"".concat(n>0?" ":"").concat(t.value).concat(t.unit)}),"")}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"collectLessons",(function(){var e=document.querySelector(".hero-source").textContent,n=document.querySelector("h1.hero-title").textContent,r=i.UrlParse(document.location.href).path.pop(),a={author:e,course_display_name:n,course_name:r,lessons:[]};t.lessonsListEl.querySelectorAll(".lessons-item").forEach((function(e){var t=e.querySelector('[itemprop="url"]').getAttribute("href"),n="";n+=e.querySelector(".lessons-title").textContent,n+=" ",n+=e.querySelector(".lessons-name").textContent,n+=".",n+=i.UrlParse(t).file.ext,a.lessons.push(u({},t,i.fileNameNormalize(n)))})),a.lessons.push(t.collectMaterials(i.fileNameNormalize(r))),console.log(a),o()(JSON.stringify(a," ",4),"".concat(i.fileNameNormalize(r),".json"),"application/json")})),this.btn=null,this.lessonsListEl=null,this.init()}var t,n,r;return t=e,(n=[{key:"createBtn",value:function(){this.btn=document.createElement("button"),this.btn.className="btn mt-20 ml-20",this.btn.textContent="Скачать json с уроками",this.btn.addEventListener("click",this.collectLessons),document.querySelector("#lessons-toggle").after(this.btn)}},{key:"collectMaterials",value:function(e){var t=document.querySelector('[title="Download course materials"]');return u({},t.href,"Материалы курса - ".concat(e,".").concat(i.UrlParse(t.href).file.ext))}},{key:"init",value:function(){this.lessonsListEl=document.querySelector("#lessons-list"),this.createBtn()}},{key:"destroy",value:function(){this.btn.remove()}}])&&l(t.prototype,n),r&&l(t,r),e}();window.lessonsCollector=new c}]);